<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.ower.dsyz.admin.manual.dao.AdminDepUserExtMapper">
	<select id="queryAdminDepUserDTOList" parameterType="com.ower.dsyz.admin.manual.dto.AdminDepUserDTO"
		resultType="com.ower.dsyz.admin.manual.dto.AdminDepUserDTO">
		select t1.dep_user_id as depUserId,
		t1.dep_id as depId,
		t1.user_id as userId,
		t1.is_valid as isValid,
		t1.remark as remark,
		t2.ins_id as insId
		from t_admin_dep_user t1 LEFT JOIN t_admin_department t2 on t1.dep_id =
		t2.dep_id left join t_admin_user_login t3 on t3.user_id = t1.user_id
		where 1=1
		<if test="depId!=null and depId !=''">
			and t1.dep_id = #{depId,jdbcType=VARCHAR}
		</if>
		<if test="userId!=null and userId !=''">
			and t1.user_id = #{userId,jdbcType=VARCHAR}
		</if>
		<if test="isValid!=null and isValid !=''">
			and t1.is_valid = #{isValid,jdbcType=VARCHAR}
		</if>
		<if test="phone!=null and phone !=''">
			and t3.phone = #{phone,jdbcType=VARCHAR}
		</if>
		<if test="insId!=null and insId !=''">
			and t2.ins_id = #{insId,jdbcType=VARCHAR}
		</if>
		<if test="depUserId!=null and depUserId !=''">
			and t1.dep_user_id = #{depUserId,jdbcType=VARCHAR}
		</if>
	</select>
</mapper>